"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1257],{1257:(k,g,r)=>{r.r(g),r.d(g,{DetailsPageModule:()=>M});var m=r(177),d=r(9417),a=r(4742),l=r(8714),t=r(4438),u=r(8831),h=r(7468),p=r(9437);function _(n,s){if(1&n&&(t.j41(0,"div")(1,"div",17)(2,"strong"),t.EFF(3),t.k0s(),t.j41(4,"span",18),t.EFF(5),t.k0s()(),t.j41(6,"div",19),t.EFF(7),t.k0s()()),2&n){const e=t.XpG().$implicit;t.R7$(3),t.JRh(e.username),t.R7$(2),t.JRh(e.formattedDate||"No Date Available"),t.R7$(2),t.SpI(" ",e.comment||"No Comment Provided"," ")}}function f(n,s){if(1&n&&(t.j41(0,"div",16),t.DNE(1,_,8,3,"div",4),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.Y8G("ngIf",(null==e.comment?null:e.comment.trim())&&(null==e.username?null:e.username.trim())&&e.creation_date)}}function x(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",20)(1,"ion-label",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleComments())}),t.EFF(2),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(2),t.SpI(" ",e.showAllComments?"Show Less":"View All Comments"," ")}}function b(n,s){1&n&&t.nrm(0,"ion-spinner",22)}function w(n,s){1&n&&(t.j41(0,"p",23),t.EFF(1,"Loading painting details..."),t.k0s())}function v(n,s){if(1&n){const e=t.RV6();t.j41(0,"ion-card"),t.nrm(1,"ion-img",6),t.j41(2,"ion-card-header")(3,"ion-card-title"),t.EFF(4),t.k0s(),t.j41(5,"ion-card-subtitle",7),t.EFF(6),t.k0s()(),t.j41(7,"ion-card-content")(8,"p",8)(9,"strong"),t.EFF(10,"Artist:"),t.k0s(),t.EFF(11),t.k0s(),t.j41(12,"p")(13,"strong"),t.EFF(14,"Material:"),t.k0s(),t.EFF(15),t.k0s(),t.j41(16,"p")(17,"strong"),t.EFF(18,"Dimensions:"),t.k0s(),t.EFF(19),t.k0s(),t.j41(20,"h2",9),t.EFF(21),t.k0s(),t.j41(22,"div",10),t.DNE(23,f,2,1,"div",11),t.k0s(),t.DNE(24,x,3,1,"div",12)(25,b,1,0,"ion-spinner",13)(26,w,2,0,"p",14),t.k0s(),t.j41(27,"ion-button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openReviewForm())}),t.EFF(28," Add Review"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("src",e.paintingDetails.primaryImage),t.R7$(3),t.JRh(e.paintingDetails.title),t.R7$(2),t.JRh(e.paintingDetails.objectDate),t.R7$(5),t.SpI(" ",e.paintingDetails.artistDisplayName,""),t.R7$(4),t.SpI(" ",e.paintingDetails.medium,""),t.R7$(4),t.JRh(e.paintingDetails.dimensions),t.R7$(2),t.SpI("Reviews (",e.comments.length,")"),t.R7$(2),t.Y8G("ngForOf",e.displayComments),t.R7$(),t.Y8G("ngIf",e.comments.length>3),t.R7$(),t.Y8G("ngIf",!e.paintingDetails),t.R7$(),t.Y8G("ngIf",!e.paintingDetails)}}function P(n,s){if(1&n){const e=t.RV6();t.j41(0,"ion-card",24)(1,"ion-card-header")(2,"ion-card-title",25),t.EFF(3,"Write a Review"),t.k0s(),t.j41(4,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.showReviewForm=!1)}),t.EFF(5,"\xd7"),t.k0s()(),t.j41(6,"ion-card-content")(7,"h3"),t.EFF(8,"Name"),t.k0s(),t.j41(9,"ion-item")(10,"ion-input",27),t.mxI("ngModelChange",function(i){t.eBV(e);const c=t.XpG();return t.DH7(c.reviewName,i)||(c.reviewName=i),t.Njj(i)}),t.k0s()(),t.j41(11,"h3"),t.EFF(12,"Review"),t.k0s(),t.j41(13,"ion-item")(14,"ion-textarea",27),t.mxI("ngModelChange",function(i){t.eBV(e);const c=t.XpG();return t.DH7(c.reviewText,i)||(c.reviewText=i),t.Njj(i)}),t.k0s()(),t.j41(15,"ion-button",28),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addReview())}),t.EFF(16,"Submit"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(10),t.R50("ngModel",e.reviewName),t.R7$(4),t.R50("ngModel",e.reviewText)}}const C=[{path:"",component:(()=>{var n;class s{constructor(){this.route=(0,t.WQX)(l.nX),this.backendApiService=(0,t.WQX)(u.s),this.paintingDetails=null,this.comments=[],this.showAllComments=!1,this.likes=[],this.showReviewForm=!1,this.reviewName="",this.reviewText=""}ngOnInit(){this.route.paramMap.subscribe(o=>{this.paintingNumber=Number(o.get("paintingNumber")),console.log("Received Painting Number:",this.paintingNumber),isNaN(this.paintingNumber)||this.fetchPaintingDetailsAndComments()})}fetchPaintingDetailsAndComments(){(0,h.p)({painting:this.backendApiService.getAllPaintingDetails(this.paintingNumber).pipe((0,p.W)(o=>(console.error("Error fetching painting details",o),[]))),comments:this.backendApiService.getCommentsForPainting(this.paintingNumber).pipe((0,p.W)(o=>(console.error("Error fetching comments",o),[])))}).subscribe(({painting:o,comments:i})=>{this.paintingDetails=o,console.log(" Painting details:",this.paintingDetails),this.comments=i.map(c=>({comment:c.comment,creation_date:c.creation_date,username:c.username,formattedDate:this.formatDate(c.creation_date)})),console.log(" Comments:",this.comments)})}get displayComments(){return this.showAllComments?this.comments:this.comments.slice(0,3)}toggleComments(){this.showAllComments=!this.showAllComments}formatDate(o){if(!o)return"Unknown Date";const i=new Date(o);return isNaN(i.getTime())?"Invalid Date":i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}addReview(){if(this.reviewName.trim()&&this.reviewText.trim()){const o={comment:this.reviewText,creation_date:(new Date).toISOString(),username:this.reviewName,formattedDate:this.formatDate((new Date).toISOString())};this.comments.push(o),this.backendApiService.addComment(this.paintingNumber,o).subscribe(i=>{console.log("Comment added successfully!",i)},i=>{console.error("Error adding comment",i)}),this.reviewName="",this.reviewText="",this.showReviewForm=!1}else console.log("Name and Comment cannot be empty!")}openReviewForm(){this.showReviewForm=!0,this.showAllComments=!1}}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-details"]],standalone:!1,decls:8,vars:2,consts:[[1,"header"],["slot","start","routerLink","/list-painting",1,"back-button"],["name","arrow-back-outline"],["src","assets/icon/logo2.png","alt","Logo",1,"img-style"],[4,"ngIf"],["class","add-review-card",4,"ngIf"],["alt","Artwork Image",3,"src"],[1,"date-num"],[1,"artist"],[1,"reviews-title"],[1,"comments-section"],["class","comment",4,"ngFor","ngForOf"],["class","comments-header",4,"ngIf"],["name","crescent",4,"ngIf"],["class","loading-message",4,"ngIf"],["name","create-outline",1,"add-comment",3,"click"],[1,"comment"],[1,"comment-header"],[1,"comment-time"],[1,"comment-body"],[1,"comments-header"],[1,"view-all-comments",3,"click"],["name","crescent"],[1,"loading-message"],[1,"add-review-card"],[1,"write-review"],[1,"close-button",3,"click"],["placeholder","Write here",3,"ngModelChange","ngModel"],["expand","full",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-button",1),t.nrm(3,"ion-icon",2),t.k0s(),t.nrm(4,"img",3),t.k0s()(),t.j41(5,"ion-content"),t.DNE(6,v,29,11,"ion-card",4)(7,P,17,2,"ion-card",5),t.k0s()),2&o&&(t.R7$(6),t.Y8G("ngIf",i.paintingDetails),t.R7$(),t.Y8G("ngIf",i.showReviewForm))},dependencies:[m.Sq,m.bT,d.BC,d.vS,a.Jm,a.b_,a.I9,a.ME,a.HW,a.tN,a.W9,a.eU,a.iq,a.KW,a.$w,a.uz,a.he,a.w2,a.nc,a.ai,a.Gw,a.N7,l.Wk],styles:["ion-toolbar.header[_ngcontent-%COMP%]{--background: #2c110d;position:fixed;top:0;left:0;width:100%;height:70px;transition:top .3s ease;z-index:1000}ion-button.back-button[_ngcontent-%COMP%]{--background: transparent;--color: white;font-size:23px}ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#fff;padding-bottom:10px}img[_ngcontent-%COMP%]{position:absolute;left:350px;top:15px;height:40px}ion-content[_ngcontent-%COMP%]{--ion-background-color: #d4d4d4c8 !important;padding-top:130px}ion-card[_ngcontent-%COMP%]{background-color:#ece9e7;display:flex;flex-direction:column;border-radius:20px;width:450px;max-width:95%;overflow:hidden;margin:100px auto 20px;padding:15px;position:relative}ion-img[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}ion-card-title[_ngcontent-%COMP%]{margin-bottom:10px;font-size:30px;color:#140c0c;transform:translateY(25px)}h2.reviews-title[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:10px;font-size:25px;color:#140c0c}.date[_ngcontent-%COMP%]{font-size:19px;color:#333}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;line-height:1.5}.comment-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:15px;z-index:1000}.custom-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);--box-shadow: 0px 6px 12px rgba(0, 0, 0, .2)}.date_painting[_ngcontent-%COMP%]{font-size:27px;color:#630a07}.comments-section[_ngcontent-%COMP%]{background:transparent!important}.comment[_ngcontent-%COMP%]{background:#f5f2f2c5;padding:12px;border-radius:10px;margin-bottom:15px;font-size:15px;font-family:Georgia,serif;box-shadow:0 3px 6px #0000001a}.comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px;color:#2c110d}.comment-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:16px}.comment-time[_ngcontent-%COMP%]{color:#777;font-size:12px}.comment-body[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;color:#333}.comments-header[_ngcontent-%COMP%]{color:#23479b;text-align:right;text-decoration:underline;margin-top:-5px}.add-comment[_ngcontent-%COMP%]{--background: #000;font-size:25x;height:50px;font-size:20px;color:#f5e1da;padding:5px 10px;font-size:12px;width:250px;display:block;margin:0 auto;text-align:center;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}add-comment[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 12px #ffe0c866}.write-review[_ngcontent-%COMP%]{bottom:30px;color:#000}.add-review-card[_ngcontent-%COMP%]{margin-top:450px;position:fixed;top:-50px;left:50%;transform:translate(-50%);width:100%;max-width:500px;background:#e3d9d9;opacity:1;border-radius:10px;box-shadow:0 4px 8px #2e2d2d01;z-index:200;padding:20px;height:auto}ion-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:10px;color:#000}.add-review-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:10px;color:#000}ion-input[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#dedddd6f}.add-review-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:15px}.close-button[_ngcontent-%COMP%]{padding:0;position:absolute;right:10px;background:transparent;border:none;font-size:40px;cursor:pointer;color:#000}.add-review-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#250c0c;left:90px}p.artist[_ngcontent-%COMP%]{padding-top:10px}.add-review-card[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%], .add-review-card[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#5e5d5d}.add-review-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #000;--color: white;margin-top:20px}"]}),s})()}];let D=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[l.iI.forChild(C),l.iI]}),s})(),M=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.MD,d.YN,a.bv,D]}),s})()}}]);